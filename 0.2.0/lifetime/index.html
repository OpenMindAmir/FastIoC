
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://OpenMindAmir.github.io/FastIoC/0.2.0/lifetime/">
      
      
        <link rel="prev" href="../passive/">
      
      
        <link rel="next" href="../nested/">
      
      
      <link rel="icon" href="../logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Dependency Lifetimes - FastIoC</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="yellow" data-md-color-accent="yellow">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dependency-lifetimes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://OpenMindAmir.github.io/FastIoC" title="FastIoC" class="md-header__button md-logo" aria-label="FastIoC" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FastIoC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dependency Lifetimes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="yellow" data-md-color-accent="yellow"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="yellow" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenMindAmir/FastIoC" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    openmindamir/fastioc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://OpenMindAmir.github.io/FastIoC" title="FastIoC" class="md-nav__button md-logo" aria-label="FastIoC" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    FastIoC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenMindAmir/FastIoC" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    openmindamir/fastioc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://OpenMindAmir.ir/donate" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üíùDONATEüíù
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../injectify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Injectification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../register/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Registeration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resolve/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Resolution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../passive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Passive & Global Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Dependency Lifetimes
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Dependency Lifetimes
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scoped" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scoped">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-example" class="md-nav__link">
    <span class="md-ellipsis">
      Generator Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transient" class="md-nav__link">
    <span class="md-ellipsis">
      Transient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Generator Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singleton" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-generators-allowed" class="md-nav__link">
    <span class="md-ellipsis">
      No Generators Allowed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lifetime-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Lifetime Comparison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visual-example" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choosing-the-right-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the Right Lifetime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-callable-class-instances-with-lifetimes" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: Callable Class Instances with Lifetimes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: Callable Class Instances with Lifetimes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-singleton-not-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ùå With Singleton (Not Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-scoped-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö°Ô∏èWith Scoped (Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-transient" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö°Ô∏èWith Transient
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Related Topics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-singletons-in-production-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: Singletons in Production Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: Singletons in Production Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-singleton-per-worker-process" class="md-nav__link">
    <span class="md-ellipsis">
      One Singleton Per Worker Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-how-lifetimes-work-internally" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: How Lifetimes Work Internally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: How Lifetimes Work Internally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scoped-transient-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped &amp; Transient (Classes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scoped-transient-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped &amp; Transient (Functions)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton (Classes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton (Functions)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nested/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nested Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../override/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Overrides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Passing Data to Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dispose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dispose (Singleton Clean-up)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APIController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure at Scale
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extra
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Extra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APIController
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scoped" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scoped">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-example" class="md-nav__link">
    <span class="md-ellipsis">
      Generator Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transient" class="md-nav__link">
    <span class="md-ellipsis">
      Transient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Generator Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singleton" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Class Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Function Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-generators-allowed" class="md-nav__link">
    <span class="md-ellipsis">
      No Generators Allowed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lifetime-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Lifetime Comparison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visual-example" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choosing-the-right-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the Right Lifetime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-callable-class-instances-with-lifetimes" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: Callable Class Instances with Lifetimes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: Callable Class Instances with Lifetimes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-singleton-not-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ùå With Singleton (Not Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-scoped-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö°Ô∏èWith Scoped (Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-transient" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö°Ô∏èWith Transient
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Related Topics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-singletons-in-production-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: Singletons in Production Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: Singletons in Production Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-singleton-per-worker-process" class="md-nav__link">
    <span class="md-ellipsis">
      One Singleton Per Worker Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-how-lifetimes-work-internally" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: How Lifetimes Work Internally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced: How Lifetimes Work Internally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scoped-transient-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped &amp; Transient (Classes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scoped-transient-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped &amp; Transient (Functions)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton (Classes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton (Functions)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="dependency-lifetimes">Dependency Lifetimes</h1>
<p>Dependency lifetimes control how long a dependency instance lives and when it gets created. FastIoC provides three lifetime options: <strong>Scoped</strong>, <strong>Transient</strong>, and <strong>Singleton</strong>.</p>
<p>Understanding lifetimes is crucial for managing resources, state, and performance in your application.</p>
<h2 id="scoped">Scoped</h2>
<p><strong>Created once per request</strong>. This is equivalent to FastAPI's <code>Depends(...)</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IUserService</span><span class="p">,</span> <span class="n">UserService</span><span class="p">)</span>
</code></pre></div>
<p><strong>When to use:</strong>
- Database connections/sessions
- Request-specific state
- User context for the current request
- Services that need isolation between requests</p>
<p><strong>Behavior:</strong>
- Created once at the start of each request
- Same instance throughout <strong>one request</strong>
- Different instance for <strong>each request</strong>
- Disposed at the end of the request</p>
<h3 id="class-example">Class Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/services.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatabaseSession</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">create_connection</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DatabaseSession created: </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">DatabaseSession</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># When you make requests:</span>
<span class="c1"># Request 1: DatabaseSession created: 140234567890  ‚Üê New instance</span>
<span class="c1">#            (same instance used throughout request 1)</span>
<span class="c1"># Request 2: DatabaseSession created: 140234599999  ‚Üê New instance</span>
<span class="c1">#            (same instance used throughout request 2)</span>
</code></pre></div>
<p><strong>Note:</strong> For classes, the <strong>instance</strong> is cached per request.</p>
<h3 id="function-example">Function Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/dependencies.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_current_user_id</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># Simulate expensive operation</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">extract_from_token</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extracted user_id: </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">user_id</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">CurrentUserId</span><span class="p">,</span> <span class="n">get_current_user_id</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/profile&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_profile</span><span class="p">(</span><span class="n">user_id1</span><span class="p">:</span> <span class="n">CurrentUserId</span><span class="p">,</span> <span class="n">user_id2</span><span class="p">:</span> <span class="n">CurrentUserId</span><span class="p">):</span>
    <span class="c1"># Extracted user_id: 42  ‚Üê Called once per request</span>
    <span class="c1"># user_id1 and user_id2 are the same cached value</span>
    <span class="k">assert</span> <span class="n">user_id1</span> <span class="o">==</span> <span class="n">user_id2</span>  <span class="c1"># ‚úÖ True</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id1</span><span class="p">}</span>
</code></pre></div>
<p><strong>Note:</strong> For functions, the <strong>return value</strong> is cached per request, not the function instance.</p>
<h3 id="generator-example">Generator Example</h3>
<p>Generators are perfect for scoped dependencies when you need setup and teardown:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/dependencies.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generator</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_db_session</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DatabaseSession</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Opening database connection&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">create_session</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">session</span>  <span class="c1"># Provided to the endpoint</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closing database connection&quot;</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># Cleanup runs at request end</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">get_db_session</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Request lifecycle:</span>
<span class="c1"># 1. &quot;Opening database connection&quot;  ‚Üê Setup (before endpoint)</span>
<span class="c1"># 2. Endpoint executes with session</span>
<span class="c1"># 3. &quot;Closing database connection&quot;  ‚Üê Cleanup (after endpoint)</span>
</code></pre></div>
<p><strong>Both sync and async generators are supported</strong> - FastAPI handles them automatically:</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_async_session</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Session</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Opening async connection&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create_async_session</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">session</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closing async connection&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<h2 id="transient">Transient</h2>
<p><strong>Created every time</strong> it's requested. This is equivalent to FastAPI's <code>Depends(..., use_cache=False)</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">IEmailService</span><span class="p">,</span> <span class="n">EmailService</span><span class="p">)</span>
</code></pre></div>
<p><strong>When to use:</strong>
- Lightweight services
- Stateless operations
- Services used once and discarded
- When you need a fresh instance every time</p>
<p><strong>Behavior:</strong>
- Created <strong>every time</strong> it's injected
- Different instance <strong>even within the same request</strong>
- Multiple injections = multiple instances
- Disposed immediately after use</p>
<h3 id="class-example_1">Class Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/services.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EmailService</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;EmailService created: </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending email to </span><span class="si">{</span><span class="n">to</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">IEmailService</span><span class="p">,</span> <span class="n">EmailService</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/send&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">send_emails</span><span class="p">(</span>
    <span class="n">email1</span><span class="p">:</span> <span class="n">IEmailService</span><span class="p">,</span>
    <span class="n">email2</span><span class="p">:</span> <span class="n">IEmailService</span>
<span class="p">):</span>
    <span class="c1"># EmailService created: 140234567890  ‚Üê First injection</span>
    <span class="c1"># EmailService created: 140234599999  ‚Üê Second injection (different instance!)</span>
    <span class="n">email1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;user1@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
    <span class="n">email2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;user2@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;World&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;sent&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</code></pre></div>
<p><strong>Note:</strong> For classes, a <strong>new instance</strong> is created every time.</p>
<h3 id="function-example_1">Function Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/dependencies.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate_request_id</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">request_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated request_id: </span><span class="si">{</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_id</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">RequestId</span><span class="p">,</span> <span class="n">generate_request_id</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/track&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">track</span><span class="p">(</span><span class="n">id1</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RequestId</span><span class="p">],</span> <span class="n">id2</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RequestId</span><span class="p">]):</span>
    <span class="c1"># Generated request_id: abc-123  ‚Üê First call</span>
    <span class="c1"># Generated request_id: def-456  ‚Üê Second call (different value!)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id1&quot;</span><span class="p">:</span> <span class="n">id1</span><span class="p">,</span> <span class="s2">&quot;id2&quot;</span><span class="p">:</span> <span class="n">id2</span><span class="p">}</span>
</code></pre></div>
<p><strong>Note:</strong> For functions, the function is <strong>called every time</strong>, returning a fresh value.</p>
<h3 id="generator-example_1">Generator Example</h3>
<p>Transient generators are useful for one-time resource management:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/dependencies.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generator</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_temp_file</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="n">filepath</span> <span class="o">=</span> <span class="n">create_temp_file</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created temp file: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">filepath</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">delete_temp_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted temp file: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">TempFile</span><span class="p">,</span> <span class="n">get_temp_file</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/process&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">file1</span><span class="p">:</span> <span class="n">TempFile</span><span class="p">,</span> <span class="n">file2</span><span class="p">:</span> <span class="n">TempFile</span><span class="p">):</span>
    <span class="c1"># Created temp file: /tmp/abc  ‚Üê First injection</span>
    <span class="c1"># Created temp file: /tmp/def  ‚Üê Second injection</span>
    <span class="c1"># ... endpoint logic ...</span>
    <span class="c1"># Deleted temp file: /tmp/abc  ‚Üê Cleanup after endpoint</span>
    <span class="c1"># Deleted temp file: /tmp/def  ‚Üê Cleanup after endpoint</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;processed&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</code></pre></div>
<p><strong>Both sync and async generators are supported</strong> - FastAPI handles them automatically.</p>
<h2 id="singleton">Singleton</h2>
<p><strong>Created once</strong> for the entire application lifetime.</p>
<div class="highlight"><pre><span></span><code><span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConfigService</span><span class="p">,</span> <span class="n">ConfigService</span><span class="p">)</span>
</code></pre></div>
<p><strong>When to use:</strong>
- Configuration that doesn't change
- Shared caches
- Connection pools
- Application-wide state
- Services without request-specific state</p>
<p><strong>Behavior:</strong>
- Created on first use
- Same instance for <strong>every request</strong>
- Lives until application shutdown
- Shared across all requests and users</p>
<h3 id="class-example_2">Class Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/services.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ConfigService</span><span class="p">(</span><span class="n">IConfigService</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ConfigService created: </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConfigService</span><span class="p">,</span> <span class="n">ConfigService</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># When you make requests:</span>
<span class="c1"># Request 1: ConfigService created: 140234567890  ‚Üê Created once</span>
<span class="c1"># Request 2: (uses same instance)</span>
<span class="c1"># Request 3: (uses same instance)</span>
</code></pre></div>
<p><strong>Note:</strong> For classes, the <strong>instance</strong> is cached for the entire application lifetime.</p>
<h3 id="function-example_2">Function Example</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># project/dependencies.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_app_config</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading configuration from file&quot;</span><span class="p">)</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">read_config_file</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config</span>

<span class="c1"># project/container.py</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">AppConfig</span><span class="p">,</span> <span class="n">load_app_config</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># First request:</span>
<span class="c1"># Loading configuration from file  ‚Üê Called once</span>
<span class="c1"># ... returns config dict ...</span>

<span class="c1"># Subsequent requests:</span>
<span class="c1"># (returns cached config dict, function never called again)</span>
</code></pre></div>
<p><strong>Note:</strong> For functions, the <strong>return value</strong> is cached for the entire application lifetime.</p>
<h3 id="no-generators-allowed">No Generators Allowed</h3>
<p>Singletons <strong>cannot</strong> be generators or async generators:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ‚ùå WRONG: This will raise SingletonGeneratorError</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_database</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">db</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">get_database</span><span class="p">)</span>  <span class="c1"># ‚ùå Error!</span>
</code></pre></div>
<p><strong>Why?</strong> Generators can only be used once. After yielding a value and reaching the end, they cannot be reused. Since singletons are meant to be reused across the entire application, generators don't make sense as singletons.</p>
<p>See the <a href="/FastIoC/reference/exceptions#fastioc.errors.SingletonGeneratorError"><code>SingletonGeneratorError</code> API reference</a> for more details.</p>
<p><strong>Solution 1:</strong> Use a regular <em>class</em> or <em>function</em> for singletons:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ‚úÖ CORRECT: Use a class</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatabasePool</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">create_connection_pool</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>

<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IDatabasePool</span><span class="p">,</span> <span class="n">DatabasePool</span><span class="p">)</span>  <span class="c1"># ‚úÖ OK</span>
</code></pre></div>
<p><strong>Solution 2:</strong> Use scoped/transient for generators:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ‚úÖ CORRECT: Use scoped for generators</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">get_database</span><span class="p">)</span>  <span class="c1"># ‚úÖ OK</span>
</code></pre></div>
<p><strong>‚ö°Ô∏èSolution 3:</strong> If you need cleanup for singleton resources, use the <a href="../dispose/">dispose feature</a>:</p>
<p><div class="highlight"><pre><span></span><code><span class="c1"># ‚úÖ CORRECT: Use singleton with dispose for cleanup</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DatabasePool</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">create_connection_pool</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__dispose__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># also you can use `async def`, FastIoC will automatically handle it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">close_all</span><span class="p">()</span>

<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IDatabasePool</span><span class="p">,</span> <span class="n">DatabasePool</span><span class="p">)</span>
<span class="c1"># Cleanup will run at application shutdown (see dispose documentation)</span>
</code></pre></div>
‚ö†Ô∏è <strong>Note</strong>: before using this feature you must config it first, see <a href="../dispose/">here</a>.</p>
<h2 id="lifetime-comparison">Lifetime Comparison</h2>
<table>
<thead>
<tr>
<th>Lifetime</th>
<th>Created</th>
<th>Shared</th>
<th>Disposed</th>
<th>FastAPI Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scoped</strong></td>
<td>Once per request</td>
<td>Within same request</td>
<td>At request end</td>
<td><code>Depends(...)</code></td>
</tr>
<tr>
<td><strong>Transient</strong></td>
<td>Every injection</td>
<td>Never shared</td>
<td>After use</td>
<td><code>Depends(..., use_cache=False)</code></td>
</tr>
<tr>
<td><strong>Singleton</strong></td>
<td>Once per application</td>
<td>Across all requests</td>
<td>At app shutdown</td>
<td><em>(Not directly available in FastAPI)</em></td>
</tr>
</tbody>
</table>
<h2 id="visual-example">Visual Example</h2>
<p>Here's how different lifetimes behave across requests:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">project.interfaces</span><span class="w"> </span><span class="kn">import</span> <span class="n">IConfigService</span><span class="p">,</span> <span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">IEmailService</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">project.container</span><span class="w"> </span><span class="kn">import</span> <span class="n">container</span>

<span class="c1"># Register with different lifetimes</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConfigService</span><span class="p">,</span> <span class="n">ConfigService</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">DatabaseSession</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">IEmailService</span><span class="p">,</span> <span class="n">EmailService</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/example&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">example</span><span class="p">(</span>
    <span class="n">config1</span><span class="p">:</span> <span class="n">IConfigService</span><span class="p">,</span>
    <span class="n">config2</span><span class="p">:</span> <span class="n">IConfigService</span><span class="p">,</span>
    <span class="n">db1</span><span class="p">:</span> <span class="n">IDatabaseSession</span><span class="p">,</span>
    <span class="n">db2</span><span class="p">:</span> <span class="n">IDatabaseSession</span><span class="p">,</span>
    <span class="n">email1</span><span class="p">:</span> <span class="n">IEmailService</span><span class="p">,</span>
    <span class="n">email2</span><span class="p">:</span> <span class="n">IEmailService</span>
<span class="p">):</span>
    <span class="c1"># Singleton: config1 and config2 are THE SAME instance</span>
    <span class="k">assert</span> <span class="n">config1</span> <span class="ow">is</span> <span class="n">config2</span>  <span class="c1"># ‚úÖ True</span>

    <span class="c1"># Scoped: db1 and db2 are THE SAME instance (within this request)</span>
    <span class="k">assert</span> <span class="n">db1</span> <span class="ow">is</span> <span class="n">db2</span>  <span class="c1"># ‚úÖ True</span>

    <span class="c1"># Transient: email1 and email2 are DIFFERENT instances</span>
    <span class="k">assert</span> <span class="n">email1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">email2</span>  <span class="c1"># ‚úÖ True</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>
<p><strong>Output across two requests:</strong></p>
<div class="highlight"><pre><span></span><code>Request 1:
  ConfigService created: 12345      ‚Üê Singleton (created once)
  DatabaseSession created: 67890    ‚Üê Scoped (new for request 1)
  EmailService created: 11111       ‚Üê Transient (new for email1)
  EmailService created: 22222       ‚Üê Transient (new for email2)

Request 2:
  (ConfigService reused: 12345)     ‚Üê Singleton (same instance)
  DatabaseSession created: 99999    ‚Üê Scoped (new for request 2)
  EmailService created: 33333       ‚Üê Transient (new for email1)
  EmailService created: 44444       ‚Üê Transient (new for email2)
</code></pre></div>
<h2 id="choosing-the-right-lifetime">Choosing the Right Lifetime</h2>
<p>Use this decision tree:</p>
<div class="highlight"><pre><span></span><code>Does it need to be shared across ALL requests?
‚îú‚îÄ YES ‚Üí Use Singleton
‚îÇ         (config, caches, connection pools)
‚îÇ
‚îî‚îÄ NO ‚Üí Does it need to be shared within ONE request?
         ‚îú‚îÄ YES ‚Üí Use Scoped
         ‚îÇ         (database sessions, request context)
         ‚îÇ
         ‚îî‚îÄ NO ‚Üí Use Transient
                   (lightweight services, one-time operations)
</code></pre></div>
<p><strong>Common Patterns:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Singleton: Application-wide shared state</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConfiguration</span><span class="p">,</span> <span class="n">ProductionConfiguration</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">ICache</span><span class="p">,</span> <span class="n">RedisCache</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConnectionPool</span><span class="p">,</span> <span class="n">DatabasePool</span><span class="p">)</span>

<span class="c1"># Scoped: Per-request state</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IDatabaseSession</span><span class="p">,</span> <span class="n">AsyncPostgreSQLDatabaseSession</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">ICurrentUser</span><span class="p">,</span> <span class="n">CurrentUserContext</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">IUnitOfWork</span><span class="p">,</span> <span class="n">UnitOfWork</span><span class="p">)</span>

<span class="c1"># Transient: Stateless operations</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">IEmailSender</span><span class="p">,</span> <span class="n">GoogleEmailSender</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">IDataValidator</span><span class="p">,</span> <span class="n">TransactionDataValidator</span><span class="p">)</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">ILogger</span><span class="p">,</span> <span class="n">InfluxDBLogger</span><span class="p">)</span>
</code></pre></div>
<h2 id="advanced-callable-class-instances-with-lifetimes">Advanced: Callable Class Instances with Lifetimes</h2>
<p>When using <a href="../register/#callable-class-instances-advanced">callable class instances</a> (classes with <code>__call__</code> method), the lifetime behavior works differently because you're registering an <strong>instance</strong> rather than a class or function.</p>
<h3 id="with-singleton-not-recommended">‚ùå With Singleton (Not Recommended)</h3>
<p>When you register a callable instance as singleton, FastIoC calls <code>__call__</code> <strong>once</strong> and caches that <strong>return value</strong> for the entire application lifetime:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Counter</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span>

<span class="n">counter_instance</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">CounterValue</span><span class="p">,</span> <span class="n">counter_instance</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/count1&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_count1</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">CounterValue</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>  <span class="c1"># Always returns 1</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/count2&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_count2</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">CounterValue</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>  <span class="c1"># Always returns 1 (same cached value!)</span>
</code></pre></div>
<p><strong>What happens:</strong>
1. First request: <code>__call__()</code> is invoked ‚Üí returns <code>1</code> ‚Üí cached
2. All subsequent requests: The cached value <code>1</code> is returned, <code>__call__()</code> is never called again</p>
<p>This is usually <strong>not</strong> what you want with callable instances. Only use singleton for callable instances if you fully understand this behavior and it's exactly what you need.</p>
<h3 id="with-scoped-recommended">‚ö°Ô∏èWith Scoped (Recommended)</h3>
<p>This is where callable instances shine! When registered as scoped, the <strong>instance persists</strong> but <code>__call__</code> is invoked once per request. This gives you a "scoped proxy" pattern (similar to Spring Boot), allowing you to:</p>
<ul>
<li>Maintain state across the application lifetime (the instance persists)</li>
<li>Access request-specific context when <code>__call__</code> is invoked</li>
<li>Combine singleton-like persistence with per-request execution</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RequestContextTracker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Persists across all requests</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_ids</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="c1"># Called once per request - has access to request context!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Request-ID&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;current_request_id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
            <span class="s2">&quot;total_requests&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span>
        <span class="p">}</span>

<span class="n">tracker</span> <span class="o">=</span> <span class="n">RequestContextTracker</span><span class="p">()</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_scoped</span><span class="p">(</span><span class="n">RequestContext</span><span class="p">,</span> <span class="n">tracker</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/stats&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stats</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">):</span>
    <span class="c1"># Request 1: {&quot;current_request_id&quot;: &quot;abc&quot;, &quot;total_requests&quot;: 1}</span>
    <span class="c1"># Request 2: {&quot;current_request_id&quot;: &quot;def&quot;, &quot;total_requests&quot;: 2}</span>
    <span class="c1"># The instance state accumulates across requests!</span>
    <span class="k">return</span> <span class="n">context</span>
</code></pre></div>
<p><strong>Thanks to Python's flexibility</strong>, the instance can access both:
- <strong>Application-wide state</strong> (instance attributes persist)
- <strong>Request-specific context</strong> (when <code>__call__</code> is invoked per request)</p>
<h3 id="with-transient">‚ö°Ô∏èWith Transient</h3>
<p>With transient lifetime, <code>__call__</code> is invoked <strong>every time</strong> the dependency is injected, even within the same request:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UniqueIdGenerator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generated_count</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Persists across all calls</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># Called every injection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generated_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;id-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">generated_count</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">id_gen</span> <span class="o">=</span> <span class="n">UniqueIdGenerator</span><span class="p">()</span>
<span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">UniqueId</span><span class="p">,</span> <span class="n">id_gen</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/ids&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_ids</span><span class="p">(</span><span class="n">id1</span><span class="p">:</span> <span class="n">UniqueId</span><span class="p">,</span> <span class="n">id2</span><span class="p">:</span> <span class="n">UniqueId</span><span class="p">):</span>
    <span class="c1"># id1: &quot;id-1&quot;  ‚Üê First injection</span>
    <span class="c1"># id2: &quot;id-2&quot;  ‚Üê Second injection (different value!)</span>
    <span class="c1"># Instance state persists: generated_count = 2</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id1&quot;</span><span class="p">:</span> <span class="n">id1</span><span class="p">,</span> <span class="s2">&quot;id2&quot;</span><span class="p">:</span> <span class="n">id2</span><span class="p">}</span>
</code></pre></div>
<p>This pattern allows you to generate unique values while maintaining global state about how many have been generated.</p>
<h2 id="related-topics">Related Topics</h2>
<ul>
<li><strong><a href="../register/#callable-class-instances-advanced">Callable Class Instances</a></strong> - Learn about using callable instances as dependencies</li>
<li><strong><a href="../nested/">Nested Dependencies</a></strong> - Understand lifetime rules when dependencies depend on other dependencies, including <a href="../nested/#singletonlifetimeviolationerror"><code>SingletonLifetimeViolationError</code></a></li>
<li><strong><a href="../dispose/">Dispose (Singleton Clean-up)</a></strong> - Learn how to properly dispose of singleton resources when the application shuts down</li>
</ul>
<h2 id="advanced-singletons-in-production-deployments">Advanced: Singletons in Production Deployments</h2>
<div class="admonition warning">
<p class="admonition-title">Multiprocessing and Thread Safety Considerations</p>
<p>When deploying FastAPI with multiple workers (using Gunicorn, Uvicorn workers, etc.), be aware of these singleton behaviors:</p>
<h3 id="one-singleton-per-worker-process">One Singleton Per Worker Process</h3>
<p>When you deploy with multiple workers, <strong>each worker process gets its own singleton instance</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Running with 4 workers</span>
uvicorn<span class="w"> </span>main:app<span class="w"> </span>--workers<span class="w"> </span><span class="m">4</span>
</code></pre></div>
<p>This creates <strong>4 separate singleton instances</strong> - one per worker. Singletons are <strong>not</strong> shared across worker processes. Each worker has its own isolated Python interpreter and memory space.</p>
<p><strong>Implications:</strong>
- Singleton state is not shared between workers
- In-memory caches are duplicated across workers
- Counters and statistics are per-worker, not global
- If you need true application-wide state, use external storage (Redis, database, etc.)</p>
<h3 id="thread-safety">Thread Safety</h3>
<p>When using singleton dependencies in a multiprocessing/multithreaded environment, ensure your singleton objects are <strong>thread-safe</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ‚ùå NOT thread-safe</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UnsafeCounter</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Race condition!</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span>

<span class="c1"># ‚úÖ Thread-safe</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">threading</span><span class="w"> </span><span class="kn">import</span> <span class="n">Lock</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SafeCounter</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span>
</code></pre></div>
<p><strong>Common non-thread-safe operations:</strong>
- Incrementing counters (<code>count += 1</code>)
- Appending to lists (<code>list.append()</code>)
- Modifying dictionaries (<code>dict[key] = value</code>)
- File I/O without locks</p>
<p>Use Python's <code>threading.Lock</code>, <code>threading.RLock</code>, or thread-safe data structures (like <code>queue.Queue</code>) when modifying singleton state from multiple threads.</p>
</div>
<h2 id="advanced-how-lifetimes-work-internally">Advanced: How Lifetimes Work Internally</h2>
<div class="admonition info">
<p class="admonition-title">Technical Details for Advanced Users</p>
<p>FastIoC handles caching differently based on the lifetime:</p>
<h3 id="scoped-transient-classes">Scoped &amp; Transient (Classes)</h3>
<ul>
<li><strong>Scoped:</strong> Instance is created once and cached per request</li>
<li><strong>Transient:</strong> New instance created on every injection</li>
</ul>
<h3 id="scoped-transient-functions">Scoped &amp; Transient (Functions)</h3>
<ul>
<li><strong>Scoped:</strong> Function called once, <strong>return value</strong> cached per request</li>
<li><strong>Transient:</strong> Function called every time, returns fresh value</li>
</ul>
<p>This matches FastAPI's behavior exactly.</p>
<h3 id="singleton-classes">Singleton (Classes)</h3>
<ul>
<li>FastIoC creates the <strong>instance</strong> once and stores it internally</li>
<li>The registered dependency becomes a function that returns the stored instance</li>
<li>This ensures the same instance is always returned</li>
</ul>
<h3 id="singleton-functions">Singleton (Functions)</h3>
<ul>
<li>FastIoC calls the function once and stores the <strong>return value</strong></li>
<li>Subsequent resolutions return the cached value</li>
<li>The function is never called again</li>
</ul>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="n">container</span><span class="o">.</span><span class="n">add_singleton</span><span class="p">(</span><span class="n">IConfig</span><span class="p">,</span> <span class="n">ServiceConfig</span><span class="p">)</span>

<span class="c1"># Internally becomes something like:</span>
<span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_config</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">_instance</span>
    <span class="k">if</span> <span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_instance</span> <span class="o">=</span> <span class="n">ServiceConfig</span><span class="p">()</span>  <span class="c1"># Called once</span>
    <span class="k">return</span> <span class="n">_instance</span>  <span class="c1"># Always returns same instance</span>
</code></pre></div></p>
<p>This is why generators don't work as singletons.</p>
</div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Learn about <a href="../nested/">Nested Dependencies</a> - how dependencies can depend on other dependencies</li>
<li>Understand <a href="../override/">Dependency Overrides</a> - replacing dependencies for testing</li>
<li>Explore <a href="../dispose/">Dispose (Singleton Clean-up)</a> - properly cleaning up singleton resources</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../passive/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Passive &amp; Global Dependencies">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Passive & Global Dependencies
              </div>
            </div>
          </a>
        
        
          
          <a href="../nested/" class="md-footer__link md-footer__link--next" aria-label="Next: Nested Dependencies">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Nested Dependencies
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Amir R. Aliakbari &lt<a href="https://OpenMindAmir.ir" class="openmindamir">OpenMindAmir</a>&gt &copy 2025
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://OpenMindAmir.ir/donate" target="_blank" rel="noopener" title="OpenMindAmir.ir" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m241 87.1 15 20.7 15-20.7C296 52.5 336.2 32 378.9 32 452.4 32 512 91.6 512 165.1v2.6c0 112.2-139.9 242.5-212.9 298.2-12.4 9.4-27.6 14.1-43.1 14.1s-30.8-4.6-43.1-14.1C139.9 410.2 0 279.9 0 167.7v-2.6C0 91.6 59.6 32 133.1 32 175.8 32 216 52.5 241 87.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://OpenMindAmir.ir" target="_blank" rel="noopener" title="OpenMindAmir.ir" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:OpenMindAmir@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/OpenMindAmir" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/OpenMindAmir" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/OpenMindAmir" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.path", "navigation.footer", "versioning"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>